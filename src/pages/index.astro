---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getPosts, getDevelopmentProjects, getWriting } from "@/utils/collections";

const recentPosts = (await getPosts()).slice(0, 3);
const recentProjects = (await getDevelopmentProjects()).slice(0, 3);
const recentWriting = (await getWriting()).slice(0, 3);
---

<BaseLayout>
  <!-- Hero Section -->
  <section class="py-12 animate-fade-in">
    <h1 class="text-4xl med:text-5xl lg:text-6xl font-bold mb-6 text-text-light dark:text-text-dark">
      Welcome! ðŸ‘‹
    </h1>
    <p class="text-lg med:text-xl text-gray-700 dark:text-gray-300 leading-relaxed mb-8">
      I'm a <span class="text-accent-primary font-semibold">Fullstack Software Engineer</span> and 
      <span class="text-accent-secondary font-semibold">Experienced SEO Leader</span>. 
      This is where I share my thoughts on code, SEO, and life.
    </p>
    <div class="flex gap-4 flex-wrap">
      <a 
        href="/posts" 
        class="px-6 py-3 bg-accent-primary text-white rounded-lg hover:bg-accent-secondary transition-colors duration-200 font-semibold"
      >
        Read Posts
      </a>
      <a 
        href="/about" 
        class="px-6 py-3 border-2 border-accent-primary text-accent-primary rounded-lg hover:bg-accent-primary hover:text-white transition-all duration-200 font-semibold"
      >
        About Me
      </a>
    </div>
  </section>

  <!-- Recent Posts -->
  {recentPosts.length > 0 && (
    <section class="py-12 border-t border-border-light dark:border-border-dark">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold text-text-light dark:text-text-dark">Recent Posts</h2>
        <a href="/posts" class="text-accent-primary hover:text-accent-secondary transition-colors">
          View all â†’
        </a>
      </div>
      <div class="grid gap-6">
        {recentPosts.map((post) => (
          <article class="p-6 bg-card-light dark:bg-card-dark rounded-lg border border-border-light dark:border-border-dark hover:border-accent-primary transition-colors duration-200">
            <a href={`/posts/${post.slug}`} class="block group">
              <h3 class="text-2xl font-bold mb-2 text-text-light dark:text-text-dark group-hover:text-accent-primary transition-colors">
                {post.data.title}
              </h3>
              <p class="text-text-secondary-light dark:text-text-secondary-dark mb-3">{post.data.description}</p>
              <div class="flex items-center gap-4 text-sm text-text-secondary-light dark:text-text-secondary-dark">
                <time datetime={post.data.pubDatetime.toISOString()}>
                  {post.data.pubDatetime.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                </time>
                {post.data.tags && post.data.tags.length > 0 && (
                  <div class="flex gap-2">
                    {post.data.tags.slice(0, 3).map((tag) => (
                      <span class="px-2 py-1 bg-card-muted-light dark:bg-card-muted-dark rounded text-xs">
                        #{tag}
                      </span>
                    ))}
                  </div>
                )}
              </div>
            </a>
          </article>
        ))}
      </div>
    </section>
  )}

  <!-- Recent Development Projects -->
  {recentProjects.length > 0 && (
    <section class="py-12 border-t border-border-light dark:border-border-dark">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold text-text-light dark:text-text-dark">Recent Development</h2>
        <a href="/development" class="text-accent-primary hover:text-accent-secondary transition-colors">
          View all â†’
        </a>
      </div>
      <div class="grid gap-6">
        {recentProjects.map((project) => (
          <article class="p-6 bg-card-light dark:bg-card-dark rounded-lg border border-border-light dark:border-border-dark hover:border-accent-secondary transition-colors duration-200">
            <a href={`/development/${project.slug}`} class="block group">
              <h3 class="text-2xl font-bold mb-2 text-text-light dark:text-text-dark group-hover:text-accent-secondary transition-colors">
                {project.data.title}
              </h3>
              <p class="text-text-secondary-light dark:text-text-secondary-dark mb-3">{project.data.description}</p>
              <div class="flex items-center gap-4 text-sm text-text-secondary-light dark:text-text-secondary-dark">
                <time datetime={project.data.pubDatetime.toISOString()}>
                  {project.data.pubDatetime.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                </time>
              </div>
            </a>
          </article>
        ))}
      </div>
    </section>
  )}

  <!-- Recent Writing -->
  {recentWriting.length > 0 && (
    <section class="py-12 border-t border-border-light dark:border-border-dark">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold text-text-light dark:text-text-dark">Recent Writing</h2>
        <a href="/writing" class="text-accent-primary hover:text-accent-secondary transition-colors">
          View all â†’
        </a>
      </div>
      <div class="grid gap-6">
        {recentWriting.map((piece) => (
          <article class="p-6 bg-card-light dark:bg-card-dark rounded-lg border border-border-light dark:border-border-dark hover:border-accent-primary transition-colors duration-200">
            <a href={`/writing/${piece.slug}`} class="block group">
              <h3 class="text-2xl font-bold mb-2 text-text-light dark:text-text-dark group-hover:text-accent-primary transition-colors">
                {piece.data.title}
              </h3>
              <p class="text-text-secondary-light dark:text-text-secondary-dark mb-3">{piece.data.description}</p>
              <div class="flex items-center gap-4 text-sm text-text-secondary-light dark:text-text-secondary-dark">
                <time datetime={piece.data.pubDatetime.toISOString()}>
                  {piece.data.pubDatetime.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                </time>
                <span class="px-2 py-1 bg-card-muted-light dark:bg-card-muted-dark rounded text-xs">
                  {piece.data.type}
                </span>
              </div>
            </a>
          </article>
        ))}
      </div>
    </section>
  )}
</BaseLayout>
